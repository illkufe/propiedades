{% extends 'index.html' %}
{% block section %}
{% load extra_tags %}

{% include 'partials/breadcrumbs-bar.html' %}

<div class="wrapper wrapper-content">
	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
					<h5>Documentos del Activos</h5>
					<!-- <div class="ibox-tools">
						<a href='{% url "activo_new" %}'><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i> nuevo activo</button></a>
					</div> -->
				</div>
				<div class="ibox-content">
					<div class="row">
						<div class="col-lg-6">
							<div id="using_json-2"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock section %}

{% block scripts %}
<script>

var tabla_activos;

$(document).ready(function(){

	load_tree(3)

});

function load_tree(id){

	$.ajax({
		url: '/activos/documentos/'+id+'/',
		type: 'get',
		dataType: 'json',
		success: function(data){

			$('#using_json')
			// listen for event
			.on('changed.jstree', function (e, data) {
				var i, j, r = [];
				for(i = 0, j = data.selected.length; i < j; i++) {
					r.push(data.instance.get_node(data.selected[i]).text);
				}
				console.log(r)
			})
			.jstree({
				'core' : {
					'data':
					[
					'Empty Folder',
					{
						'text': 'Resources',
						'state': {
							'opened': true
						},
						'children': [
						{
							'text': 'css',
							// 'children': [
							// {
							// 	'text': 'animate.css', 'icon': 'none'
							// },
							// {
							// 	'text': 'bootstrap.css', 'icon': 'none'
							// },
							// {
							// 	'text': 'main.css', 'icon': 'none'
							// },
							// {
							// 	'text': 'style.css', 'icon': 'none'
							// }
							// ],
							// 'state': {
							// 	'opened': true
							// }
						},
						{
							'text': 'js',
							'children': [
							{
								'text': 'bootstrap.js', 'icon': 'none'
							},
							{
								'text': 'inspinia.min.js', 'icon': 'none'
							},
							{
								'text': 'jquery.min.js', 'icon': 'none'
							},
							{
								'text': 'jsTree.min.js', 'icon': 'none'
							},
							{
								'text': 'custom.min.js', 'icon': 'none'
							}
							],
							'state': {
								'opened': true
							}
						},
						{
							'text': 'html',
							'children': [
							{
								'text': 'layout.html', 'icon': 'none'
							},
							{
								'text': 'navigation.html', 'icon': 'none'
							},
							{
								'text': 'navbar.html', 'icon': 'none'
							},
							{
								'text': 'footer.html', 'icon': 'none'
							},
							{
								'text': 'sidebar.html', 'icon': 'none'
							}
							],
							'state': {
								'opened': true
							}
						}
						]
					},
					'Fonts',
					'Images',
					'Scripts',
					'Templates',
					]
				},
				'plugins' : [ 'types', 'dnd' ],
				'types' : {
					'default' : {
						'icon' : 'fa fa-folder'
					},
					'html' : {
						'icon' : 'fa fa-file-code-o'
					},
					'svg' : {
						'icon' : 'fa fa-file-picture-o'
					},
					'css' : {
						'icon' : 'fa fa-file-code-o'
					},
					'img' : {
						'icon' : 'fa fa-file-image-o'
					},
					'js' : {
						'icon' : 'fa fa-file-text-o'
					}
				}
			});

			$('#using_json-2')
			// listen for event
			.on('select_node.jstree', function (node,a) {

				console.log(a.node.data)
				// console.log(node)
			
				
				// var i, j, r = [];
				// for(i = 0, j = data.selected.length; i < j; i++) {

				// 	// console.log(data.instance.get_node(data.selected[i]))


				// 	r.push(data.instance.get_node(data.selected[i]).text);
				// }
				// console.log(r)
			}).jstree({
				'core' : {
					'data': data,
				},
				'plugins' : [ 'types', 'dnd' ],
				'types' : {
					'default' : {
						'icon' : 'fa fa-folder'
					},
					'html' : {
						'icon' : 'fa fa-file-code-o'
					},
					'svg' : {
						'icon' : 'fa fa-file-picture-o'
					},
					'css' : {
						'icon' : 'fa fa-file-code-o'
					},
					'img' : {
						'icon' : 'fa fa-file-image-o'
					},
					'js' : {
						'icon' : 'fa fa-file-text-o'
					}
				}
			});
		}
	})
}

</script>

{% endblock scripts %}
