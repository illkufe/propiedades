{% extends 'index.html' %}
{% block section %}

{% include 'partials/breadcrumbs-bar.html' %}

<div class="wrapper wrapper-content">
	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
					<h5>Nueva Moneda</h5>
				</div>
				<div class="ibox-content">
					<div class="row">
						<div class="col-sm-12">

							<form id="form-moneda-new" role="form" action="" method="post">
								{% csrf_token %}

								<div class="row">
									{% for field in form %}
									<div class="form-group col-sm-4">
										<i class="fa fa-question-circle info-label" data-toggle="tooltip" data-placement="top" title="{{ field.help_text }}" ></i>
										{{ field.label_tag }}
										{{ field }}
										<div class="container-error" style="height:20px">
											{{ field.errors }}
										</div>
									</div>
									{% endfor %}
								</div>
								<br>
								<button class="btn btn-w-m btn-sm btn-primary pull-right" type="submit">GUARDAR Y SALIR</button>
								<button class="btn btn-w-m btn-sm btn-primary pull-right" type="button" style="margin-right: 15px;" onclick="enviar_form('{{accion}}')">GUARDAR Y SEGUIR</button>
								<a href="/monedas/list">
									<button class="btn btn-w-m btn-sm btn-success pull-right" type="button" style="margin-right: 15px;">CANCELAR</button>
								</a>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock section %}

{% block scripts %}
<script>

$(document).ready(function(){
});

function enviar_form(accion){
	// $('#form-moneda-new').submit(function() {
		$.ajax({
			type: 'post',
			url: $('#form-moneda-new').attr('action'),
			data: $('#form-moneda-new').serialize(),
			success: function(response) {

				if (accion == 'create') {
					clear_form('#form-moneda-new')
				}
				clear_errors_form('#form-moneda-new')

				notification_toast('success', 'Ã‰XITO', 'Guardado correctamente.')
			},
			error: function(data, textStatus, jqXHR) {

				clear_errors_form('#form-moneda-new')

				var errors = $.parseJSON(data.responseText)
				apply_errors_form(errors)
			}
		});
		return false;
	// });
}

</script>
{% endblock scripts %}