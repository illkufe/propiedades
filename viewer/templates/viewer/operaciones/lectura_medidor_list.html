{% extends 'index.html' %}
{% block section %}
{% load extra_tags %}

{% include 'partials/breadcrumbs-bar.html' %}

<div class="wrapper wrapper-content">
	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
					<h5>Lecturas de Medidores</h5>
					<div class="ibox-tools">
						<a href="/lectura-electricidad/new"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i> Lectura Luz</button></a>
						<a href="/lectura-agua/new"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i> Lectura Agua</button></a>
						<a href="/lectura-gas/new"><button type="button" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i> Lectura Gas</button></a>
					</div>
				</div>
				<div class="ibox-content">
					<div class="table-responsive">
						<table id="tabla-lecturas" class="table table-striped table-bordered table-hover">
							<thead></thead>
							<tbody>
								{% for item in object_list %}
								<tr>
									<td>{{ item.id }}</td>
									<td>{{ item.activo }}</td>
									<td>{{ item.local }}</td>
									<td>{{ item.tipo }}</td>
									<td class="text-right">{{ item.mes }}</td>
									<td class="text-right">{{ item.anio }}</td>
									<td class="text-right">{{ item.creado_en }}</td>
									<td class="text-right">{{ item.valor|formato_numero }}</td>
									<td class="text-center">
										<a class="btn btn-edit btn-bitbucket" href='/lectura-{{item.url}}/update/{{item.id}}'><i class="fa fa-edit"></i></a>
										<a class="btn btn-delete btn-bitbucket" onclick="open_modal_delete(this, {{item.id}},'lectura-{{item.url}}', 'tabla-lecturas', 'Lectura')"><i class="fa fa-trash"></i></a>
										<a class="btn btn-view btn-bitbucket" href="/media/{{item.imagen_file}}" download><i class="fa fa-eye"></i></a>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock section %}

{% block scripts %}
<script>

var tabla_lecturas = []

$(document).ready(function(){

	load_tabla_lecturas()

});

function load_tabla_lecturas(){

	var configuration = {
		'order': [[3, 'asc']],
	}
	
	var columns = [
	{		
		'data': 'id',
		'title': 'ID',
		'visible': false,
	},
	{
		'width': '15%',
		'data': 'activo',
		'title': 'Activo',
	},
	{
		'width': '15%',
		'data': 'local',
		'title': 'Local',
	},
	{
		'width': '15%',
		'data': 'tipo',
		'title': 'Tipo',
	},
	{
		'width': '10%',
		'data': 'mes',
		'title': 'Mes',
	},
	{
		'width': '10%',
		'data': 'anio',
		'title': 'AÃ±o',
	},
	{
		'width': '10%',
		'data': 'fecha',
		'title': 'Fecha',
		'visible': false,
	},
	{
		'width': '10%',
		'data': 'valor',
		'title': 'Lectura',
	},
	{
		'width': '15%',
		'data': 'options',
		'orderable': false,
		'title': 'Opciones'
	}];

	tabla_lecturas = load_table('#tabla-lecturas', columns, configuration)

}

</script>

{% endblock scripts %}


